---
title: "Project title"
subtitle: "Exploratory data analysis"
execute:
  echo: true
---

```{r}
library(tidyverse)
library(janitor)
library(dplyr)
library(skimr)
```

# Inserting the dataset on Coffee
```{r}
coffee_df<-read_csv("data/GACTT_RESULTS_ANONYMIZED_v2.csv")
```

# Research question(s)

Research question(s). State your research question (s) clearly.

# Data collection and cleaning

Have an initial draft of your data cleaning appendix. Document every step that takes your raw data file(s) and turns it into the analysis-ready data set that you would submit with your final project. Include text narrative describing your data collection (downloading, scraping, surveys, etc) and any additional data curation/cleaning (merging data frames, filtering, transformations of variables, etc). Include code for data curation/cleaning, but not collection.

1. Renaming variables

```{r}

#remove NA columns
coffee_clean <- coffee_df |>
  select(-contains("flavorings")) |>
  select(-contains("Gender (please specify"))

#new names
#coffee_clean <- coffee_df |>
#  rename_with(~str_extract(.x, '(?<=\\().*?(?=\\))'))


#remove repetitive questions
coffee_clean <- coffee_clean |>
  mutate(`Where do you typically drink coffee?` = NULL) |>
  mutate(`How do you brew coffee at home?` = NULL)|>
  mutate(`On the go, where do you typically purchase coffee?` = NULL) |>
  mutate(`Do you usually add anything to your coffee?` = NULL) |>
  mutate(`What kind of diary do you add?` = NULL) |>
  mutate(`What kind of sugar or sweetener do you add?` = NULL) |>
  mutate(`Why do you drink coffee?` = NULL)


#function to simplify question names
q_simplify <- function(df, col) {
  df |>
    select(contains("Where do you typically drink")) |>
    rename_with(~str_extract(.x, '(?<=\\().*?(?=\\))'))
}


#If column is a question true false, keep first word and parentheses content

#if_else("(|)|What|Where|where|How|flavor|?",
#        true,
#        false)
# for example, for column "where do you typically drink coffee (at home)" --> "where_at_home" ;)

#rename_with(insert our function, .cols = everything())


# coffee_clean <- coffee_clean |>
#   select(contains("Where do you typically drink")) |>
#   rename_with(~str_extract(.x, '(?<=\\().*?(?=\\))'))
#   

```

# Data description

Have an initial draft of your data description section. Your data description should be about your analysis-ready data.

# Data limitations

Identify any potential problems with your dataset.

# Exploratory data analysis

Perform an (initial) exploratory data analysis.

# Questions for reviewers

List specific questions for your peer reviewers and project mentor to answer in giving you feedback on this phase.
